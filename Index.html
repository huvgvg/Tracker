<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Neon Money Tracker Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #03030a;
      --card: #090920;
      --neon: #00f7ff;
      --neon2: #7c7cff;
      --good: #4cff9e;
      --bad: #ff5c8a;
      --text: #e5e7eb;
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, #08081f, #020209);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }
    /* PIN screen */
    #pinScreen {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, #04040f, #01010a);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
    #pinScreen h2 {
      color: var(--neon);
      text-shadow: 0 0 12px var(--neon);
      margin-bottom: 20px;
    }
    #pinInput {
      font-size: 1.4rem;
      padding: 14px;
      border-radius: 14px;
      border: 2px solid rgba(0,247,255,0.4);
      background: #02020a;
      color: white;
      width: 180px;
      text-align: center;
    }
    button#pinSubmit {
      margin-top: 16px;
      padding: 12px 20px;
      border-radius: 14px;
      border: none;
      background: linear-gradient(135deg, #00f7ff, #7c7cff);
      color: #02020a;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 18px rgba(0,247,255,0.8);
      transition: 0.1s;
    }
    button#pinSubmit:active { transform: scale(0.97); box-shadow: 0 0 10px rgba(0,247,255,0.6); }
    #pinError { margin-top: 10px; color: #ff5c8a; font-size: 0.85rem; opacity: 0.9; }
    #appContent { display: none; }
    header { text-align:center; padding:18px; font-size:1.6rem; font-weight:800; letter-spacing:0.6px; color:var(--neon); text-shadow:0 0 14px var(--neon); }
    nav { display:flex; justify-content:center; gap:10px; padding:10px; position:sticky; top:0; background:rgba(5,5,20,0.7); backdrop-filter:blur(14px); z-index:20; }
    nav button { flex:1; max-width:130px; padding:12px; border-radius:16px; border:1px solid rgba(0,247,255,0.3); background:transparent; color:var(--neon); font-size:0.9rem; font-weight:700; cursor:pointer; box-shadow:0 0 12px rgba(0,247,255,0.15); transition:0.25s cubic-bezier(.4,0,.2,1);}
    nav button.active { background: rgba(0,247,255,0.18); box-shadow: 0 0 22px rgba(0,247,255,0.9); transform: translateY(-1px) scale(1.02); }
    .tab { display:none; padding:16px; max-width:960px; margin:auto; animation:slideIn 0.35s cubic-bezier(.4,0,.2,1); }
    .tab.active { display:block; }
    @keyframes slideIn { from{opacity:0; transform:translateY(12px);} to{opacity:1; transform:translateY(0);} }
    .grid { display:grid; gap:16px; }
    @media (min-width:720px){ .grid{ grid-template-columns:repeat(2,1fr);} }
    .card { background: linear-gradient(180deg, #0b0b25, #060615); border-radius:20px; padding:16px; box-shadow:0 0 25px rgba(0,247,255,0.1), inset 0 0 18px rgba(124,124,255,0.1); border:1px solid rgba(0,247,255,0.18); transition: transform 0.25s ease, box-shadow 0.25s ease; }
    .card:active { transform:scale(0.98); }
    .card h3 { margin:0 0 10px 0; font-size:1.1rem; color:var(--neon); text-shadow:0 0 8px var(--neon);}
    input, select { width:100%; padding:13px; border-radius:14px; border:1px solid rgba(0,247,255,0.35); background:#040412; color:white; font-size:1rem; outline:none; margin-bottom:10px; transition: box-shadow 0.2s ease, border-color 0.2s ease;}
    input:focus, select:focus { box-shadow:0 0 14px rgba(0,247,255,0.7); border-color:var(--neon); }
    button.primary { width:100%; padding:13px; border-radius:16px; border:none; background: linear-gradient(135deg,#00f7ff,#7c7cff); color:#02020a; font-weight:800; font-size:1rem; cursor:pointer; box-shadow:0 0 22px rgba(0,247,255,0.85); transition:transform 0.12s ease, box-shadow 0.12s ease;}
    button.primary:active { transform:scale(0.96); box-shadow:0 0 12px rgba(0,247,255,0.6); }
    .stat { font-size:1.25rem; font-weight:800; margin:6px 0; }
    .progress-wrap { margin-top:8px; }
    progress { width:100%; height:15px; border-radius:20px; overflow:hidden; }
    progress::-webkit-progress-bar { background:#050515; border-radius:20px; }
    progress::-webkit-progress-value { background: linear-gradient(90deg,#00f7ff,#7c7cff); box-shadow:0 0 14px rgba(0,247,255,1); border-radius:20px;}
    .history-item { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-radius:14px; background: rgba(0,247,255,0.06); border:1px solid rgba(0,247,255,0.18); margin-bottom:10px; font-size:0.95rem; animation:popIn 0.25s ease; }
    @keyframes popIn { from{opacity:0; transform:scale(0.95);} to{opacity:1; transform:scale(1);} }
    .gain { color: var(--good); text-shadow:0 0 6px rgba(76,255,158,0.6);}
    .spent { color: var(--bad); text-shadow:0 0 6px rgba(255,92,138,0.6);}
    .note { font-size:0.8rem; opacity:0.7; margin-top:2px;}
    .small { font-size:0.75rem; opacity:0.6;}
    .delete { background:none; border:none; color:var(--bad); font-size:1.1rem; cursor:pointer; margin-left:10px;}
    canvas { width:100% !important; max-height:420px; height:300px; touch-action: manipulation; }
    footer { text-align:center; padding:14px; font-size:0.7rem; opacity:0.45;}
  </style>
</head>
<body>

<div id="pinScreen">
  <h2>Enter PIN</h2>
  <input type="password" id="pinInput" maxlength="4" placeholder="****"/>
  <button id="pinSubmit">Unlock</button>
  <div id="pinError"></div>
</div>

<div id="appContent">
  <header>Synced tracker</header>

  <nav>
    <button id="tabBtnDashboard" class="active" onclick="openTab('dashboard')">Dashboard</button>
    <button id="tabBtnChart" onclick="openTab('chartTab')">Chart</button>
    <button id="tabBtnHistory" onclick="openTab('historyTab')">History</button>
    <button id="tabBtnNotes" onclick="openTab('notesTab')">Notes</button>
  </nav>

  <div id="dashboard" class="tab active">
    <div class="grid">
      <div class="card">
        <h3>üéØ Saving Goal</h3>
        <input type="number" id="goalInput" placeholder="Enter your goal" />
        <div class="progress-wrap">
          <p class="stat">Balance: <span id="balance">0</span> so'm</p>
          <progress id="progressBar" value="0" max="100"></progress>
          <p class="small"><span id="progressText">0</span>% of goal reached</p>
        </div>
      </div>

      <div class="card">
        <h3>‚ûï Add Transaction</h3>
        <input type="number" id="amountInput" placeholder="Amount" />
        <select id="typeInput">
          <option value="gain">Gain</option>
          <option value="spent">Spent</option>
        </select>
        <input type="text" id="noteInput" placeholder="Note (e.g. Lunch, Salary)" />
        <button class="primary" onclick="addEntry()">Add</button>
      </div>
    </div>
  </div>

  <div id="chartTab" class="tab">
    <div class="card">
      <h3>üìà Balance Over Time</h3>
      <canvas id="chart"></canvas>
    </div>
  </div>

  <div id="historyTab" class="tab">
    <div class="card">
      <h3>üìú Transaction History</h3>
      <div id="historyList"></div>
    </div>
  </div>

  <div id="notesTab" class="tab">
    <div class="card">
      <h3>üìù Notes</h3>
      <div id="notesList"></div>
    </div>
  </div>

  <footer>Neon Money Tracker Pro ‚Ä¢ Synced ‚Ä¢ Touch Optimized ‚Ä¢ PIN Protected</footer>
</div>

<script>
const PIN = "3582";
const pinScreen = document.getElementById("pinScreen");
const pinInput = document.getElementById("pinInput");
const pinError = document.getElementById("pinError");
const pinSubmit = document.getElementById("pinSubmit");
const appContent = document.getElementById("appContent");

pinSubmit.addEventListener("click", checkPin);
pinInput.addEventListener("keypress", e => { if(e.key === 'Enter') checkPin(); });
function checkPin() {
  if(pinInput.value === PIN){
    pinScreen.style.display = "none";
    appContent.style.display = "block";
  } else {
    pinError.textContent = "Incorrect PIN!";
    pinInput.value = "";
  }
}

// --- Data ---
let transactions = JSON.parse(localStorage.getItem("money-data")) || [];
let goal = Number(localStorage.getItem("money-goal")) || 0;
let chart;

const balanceEl = document.getElementById("balance");
const goalInput = document.getElementById("goalInput");
const progressBar = document.getElementById("progressBar");
const progressText = document.getElementById("progressText");
const historyList = document.getElementById("historyList");
const notesList = document.getElementById("notesList");

goalInput.value = goal || "";

function saveData(){
  localStorage.setItem("money-data", JSON.stringify(transactions));
  localStorage.setItem("money-goal", goal);
}

function calculateBalance(){ return transactions.reduce((sum,t)=>sum+(t.type==="gain"?t.amount:-t.amount),0); }

function updateUI(){
  const balance = calculateBalance();
  balanceEl.textContent = balance.toFixed(2);
  if(goal>0){
    const percent = Math.min((balance/goal)*100,100);
    progressBar.value = percent;
    progressText.textContent = percent.toFixed(1);
  } else { progressBar.value=0; progressText.textContent=0; }

  historyList.innerHTML="";
  notesList.innerHTML="";
  transactions.slice().reverse().forEach((t,index)=>{
    const row = document.createElement("div");
    row.className="history-item";
    row.innerHTML=`<div>
      <div class="${t.type}">${t.type==="gain"?"+":"-"} ${t.amount} so'm</div>
      <div class="note">${t.note||"No note"}</div>
      <div class="small">${t.date}</div>
    </div>
    <button class="delete" onclick="deleteEntry(${transactions.length-1-index})">‚úï</button>`;
    historyList.appendChild(row);

    const noteRow = document.createElement("div");
    noteRow.className="history-item";
    noteRow.innerHTML=`<div>
      <div class="note"><strong>${t.note||"No note"}</strong></div>
      <div class="${t.type}">${t.type==="gain"?"+":"-"} ${t.amount} so'm</div>
      <div class="small">${t.date}</div>
    </div>`;
    notesList.appendChild(noteRow);
  });

  updateChart();
}

function addEntry(){
  const amount=Number(document.getElementById("amountInput").value);
  const type=document.getElementById("typeInput").value;
  const note=document.getElementById("noteInput").value.trim();
  if(!amount||amount<=0) return;
  transactions.push({amount,type,note,date:new Date().toLocaleString()});
  document.getElementById("amountInput").value="";
  document.getElementById("noteInput").value="";
  saveData(); updateUI();
}

function deleteEntry(i){ transactions.splice(i,1); saveData(); updateUI(); }

function updateChart(){
  const balances=[];
  let running=0;
  transactions.forEach(t=>{ running += t.type==="gain"?t.amount:-t.amount; balances.push(running); });
  const ctx = document.getElementById("chart").getContext("2d");
  if(chart) chart.destroy();
  chart = new Chart(ctx,{
    type:"line",
    data:{ labels:balances.map((_,i)=>i+1), datasets:[{label:"Balance (so'm)", data:balances, borderColor:"#00f7ff", backgroundColor:"rgba(0,247,255,0.2)", borderWidth:3, tension:0.4, fill:true}]},
    options:{
      responsive:true,
      maintainAspectRatio:false,
      plugins:{ legend:{ labels:{ color:"#00f7ff" }}},
      scales:{
        x:{ ticks:{ color:"#9ffaff" }, grid:{ color:"rgba(0,247,255,0.1)" } },
        y:{ ticks:{ color:"#9ffaff" }, grid:{ color:"rgba(0,247,255,0.1)" } }
      }
    }
  });
}

function openTab(id){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  if(id==="dashboard") tabBtnDashboard.classList.add("active");
  if(id==="chartTab") tabBtnChart.classList.add("active");
  if(id==="historyTab") tabBtnHistory.classList.add("active");
  if(id==="notesTab") tabBtnNotes.classList.add("active");
  if(id==="chartTab") updateChart();
}

goalInput.addEventListener("input",()=>{ goal=Number(goalInput.value); saveData(); updateUI(); });
updateUI();
</script>

</body>
</html>
